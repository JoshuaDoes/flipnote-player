import { h, Component } from "preact";

import flipnote from "flipnote.js";
import ViewFlipnote from "views/viewFlipnote";

class App extends Component {

  constructor() {
    super();
    this.flipnote = new flipnote.player(document.createElement("canvas"), 512, 384);
    this.flipnote.canvas.setFilter("linear");
    this.flipnote.canvas.el.className = "player__canvas";
    window.app = this;
  }

  componentDidMount() {
    this.flipnote.open("static/ppm/ekakiuta_en.ppm");
  }

  render(props, state) {
    return (
      <main class="app">
        <div class="topBar wrap wrap--wide">
          <div class="topBar__group topBar__group--left">
            {/* <svg class="topBar__logo" width="40" height="40" viewBox="0 0 380 380">
              <defs>
                <path id="a" d="M334.627473,117.223411 C338.061964,121.451305 340,126.779847 340,132.357164 L340,167.433895 C340,175.234833 336.208553,182.549087 329.833961,187.045665 L183.833961,290.032711 C175.539305,295.883684 164.460695,295.883684 156.166039,290.032711 L10.1660392,187.045665 C3.79144709,182.549087 -5.68434189e-14,175.234833 0,167.433895 L2.27373675e-13,132.357164 C2.84217094e-13,124.556225 3.79144709,117.241972 10.1660392,112.745394 L38.4006406,92.8289677 L23.1499999,82.0763953 L13.697739,75.4120064 C11.8922437,74.1390291 11.4605526,71.643434 12.7335298,69.8379387 C13.362807,68.9454193 14.3296375,68.3489895 15.4096217,68.1870797 C22.0844678,67.1863955 27.3372219,66.3145911 31.1678841,65.5716665 C71.2056467,57.8066806 106.243039,43.8780361 136.28006,23.785733 L156.166039,9.75834765 C156.955174,9.20169933 157.769507,8.69800927 158.604243,8.24727747 C166.657521,3.55469381 176.788764,3.93018076 184.509497,9.37373831 L331.605229,113.084627 C333.097363,114.136667 334.120341,115.606233 334.627473,117.223411 Z"/>
              </defs>
              <g fill="none" fill-rule="evenodd" transform="translate(20 43)">
                <use fill="#FFFFFF" href="#a"/>
                {/* <path stroke="#FFFFFF" stroke-width="15" d="M341.241093,113.511691 C345.286379,118.930097 347.5,125.533297 347.5,132.357164 L347.5,167.433895 C347.5,177.672626 342.523726,187.272584 334.157074,193.174343 L188.157074,296.161389 C177.270338,303.840791 162.729662,303.840791 151.842926,296.161389 L5.84292646,193.174343 C-2.5237257,187.272584 -7.5,177.672626 -7.5,167.433895 L-7.5,132.357164 C-7.5,122.118432 -2.5237257,112.518474 5.84292646,106.616715 L25.3871272,92.8304175 L18.8282506,88.206035 L9.37599196,81.5416477 C4.18518926,77.8818354 2.94407628,70.7069943 6.60388855,65.5161916 C8.41306163,62.9501965 11.1927013,61.2354597 14.2976581,60.7699686 C20.8757759,59.7837858 26.0311883,58.9281373 29.7399296,58.2088582 C68.7919811,50.6350427 102.870413,37.0945801 132.033454,17.6030877 L151.842926,3.62966947 C152.838261,2.92757003 153.870059,2.2856538 154.933661,1.70601319 C165.538153,-4.41852948 178.776996,-3.84472189 188.831244,3.24409702 L335.926976,106.954986 C338.303076,108.630273 340.12426,110.904162 341.241093,113.511691 Z"/> */}
                {/* <path fill="#FFFFFF" stroke="#FD7F6B" stroke-width="10" d="M329.833961,112.745394 C336.208553,117.241972 340,124.556225 340,132.357164 L340,167.433895 C340,175.234833 336.208553,182.549087 329.833961,187.045665 L183.833961,290.032711 C175.539305,295.883684 164.460695,295.883684 156.166039,290.032711 L10.1660392,187.045665 C3.79144709,182.549087 -5.68434189e-14,175.234833 0,167.433895 L2.27373675e-13,132.357164 C2.84217094e-13,124.556225 3.79144709,117.241972 10.1660392,112.745394 L156.166039,9.75834765 C164.460695,3.90737453 175.539305,3.90737453 183.833961,9.75834765 L329.833961,112.745394 Z"/>
                <path stroke="#FD7F6B" stroke-width="10" d="M183.840397,9.76969182 L330.741031,113.464257 C334.350622,116.012204 335.211255,121.003874 332.663308,124.613466 C332.136908,125.359199 331.486764,126.009343 330.741031,126.535743 L183.840397,230.230308 C175.54294,236.087337 164.45706,236.087337 156.159603,230.230308 L9.25896912,126.535743 C5.64937798,123.987796 4.78874511,118.996126 7.33669179,115.386534 C7.86309183,114.640801 8.51323573,113.990657 9.25896912,113.464257 L156.159603,9.76969182 C164.45706,3.91266344 175.54294,3.91266344 183.840397,9.76969182 Z"/>
                <path fill="#FFFFFF" stroke="#FD7F6B" stroke-width="10" d="M184.509497,9.37373831 L331.605229,113.084627 C335.216223,115.630585 336.079606,120.62178 333.533649,124.232775 C333.005954,124.981218 332.353671,125.633501 331.605229,126.161195 C324.111148,131.44495 316.617067,136.728705 309.122987,142.01246 C269.221375,170.145374 233.19623,185.969549 201.047551,189.484984 C196.590027,189.972412 190.595224,190.113851 183.06314,189.909304 C178.335193,189.780907 173.750582,188.258404 169.885074,185.533 L149.140212,170.906688 L23.1499999,82.0763953 L13.697739,75.4120064 C11.8922437,74.1390291 11.4605526,71.643434 12.7335298,69.8379387 C13.362807,68.9454193 14.3296375,68.3489895 15.4096217,68.1870797 C22.0844678,67.1863955 27.3372219,66.3145911 31.1678841,65.5716665 C73.4484242,57.3717128 110.152696,42.2982261 141.2807,20.3512062 C146.470572,16.6920502 151.660444,13.0328943 156.850316,9.37373831 C165.143068,3.52687446 176.216744,3.52687446 184.509497,9.37373831 Z M189.930359,67.1299645 C189.71462,66.6283004 189.458151,66.145151 189.163525,65.6853626 C186.183818,61.0352904 179.99866,59.6811917 175.348586,62.6608961 C173.006665,64.161569 171.061242,65.3528344 169.512317,66.234692 C161.284983,70.9188042 153.99855,74.7148978 147.653019,77.622973 C140.283157,81.0004856 130.086525,85.0572683 117.063122,89.7933209 C115.059694,90.5218814 112.311,91.5028968 108.817038,92.736367 C107.947605,93.0433019 107.267603,93.732984 106.972986,94.6066673 C106.443563,96.1766681 107.287117,97.8785875 108.857118,98.4080108 L117.15421,101.205876 L202.560253,130.00583 L209.449221,132.328874 C210.359353,132.635782 211.349532,132.604953 212.238808,132.242021 C214.284165,131.407269 215.265554,129.072479 214.430802,127.027122 L211.972765,121.004299 L191.012805,69.6470112 L189.930359,67.1299645 Z"/>
              </g>
            </svg> */}
            {/* <div class="button">hi</div> */}
          </div>
          <div class="topBar__group topBar__group--right">
          </div>
        </div>

        <div class="wrap wrap--wide">
          <ViewFlipnote flipnote={this.flipnote}/>
        </div>
      </main>
    );
  }
}

export default App;
